(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{9410:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stock",function(){return l(9837)}])},9837:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return Spwp}});var s=l(5893),i=l(7294),t=l(6501),d=l(9335),r=l(6154),n=l(1664),c=l.n(n),o=l(2077),m=l.n(o),u=l(6252),v=l(2824),b=l(8036);function Spwp(e){let{userData:a,setuserData:l}=e,[n,o]=(0,i.useState)([]),[h,p]=(0,i.useState)([]),[x,g]=(0,i.useState)(),[N,j]=(0,i.useState)(""),f="/api/stock",y="Stock";(0,i.useEffect)(()=>{var e,l,s,i,t,d;document.title=y,o(null!==(d=null==a?void 0:null===(t=a.permission)||void 0===t?void 0:null===(i=t.data)||void 0===i?void 0:null===(s=i.map(e=>e.data.find(e=>{if(e.label==y)return e})))||void 0===s?void 0:null===(l=s.filter(e=>void 0!==e))||void 0===l?void 0:null===(e=l[0])||void 0===e?void 0:e.checklist)&&void 0!==d?d:[])},[a]);let handleApi=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("create"===e)try{await (0,r.Z)({method:"POST",url:f,data:a,timeout:5e3,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{var a;g(e.data.data),t.ZP.success(e.data.massage),$(".btn-close").trigger("click"),document.getElementById("formCreate").reset(),null===(a=document.getElementById("closeImg"))||void 0===a||a.click()}).catch(e=>{if("ECONNABORTED"===e.code)t.ZP.error("Maaf database sedang mengalami gagal koneksi, harap kembali lagi nanti");else{var a,l;(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.massage)?t.ZP.error(e.response.data.massage):t.ZP.error(e.message)}})}catch(e){t.ZP.error(e.response.data.massage)}},convertFileToBase64=e=>new Promise((a,l)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>a(s.result),s.onerror=l}),submitAdd=async e=>{var a;e.preventDefault();let l=null,s=null===(a=e.target.file.files)||void 0===a?void 0:a[0];if(s){let e=s.type,a=s.size;if("image/jpeg"!==e&&"image/png"!==e)return t.ZP.error("Extension img not valid, only jpeg/png");if(a>1e5)return t.ZP.error("Size img only < 100kb");l=await convertFileToBase64(s)}handleApi("create",{stock:m()(e.target.stock.value).value(),name:e.target.name.value,price_buy:m()(e.target.price_buy.value).value(),price_sell:m()(e.target.price_sell.value).value(),stock_val:e.target.stock.value,img:l})},byNumeral=e=>{let a=m()(e.target.value).format("0,0");document.getElementById(e.target.id).value=a};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"row mb-32 gy-32",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h1",{className:"hp-mb-0 text-4xl font-bold",children:y})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"row justify-content-between gy-32",children:(0,s.jsx)("div",{className:"col hp-flex-none w-auto",children:(0,s.jsx)("nav",{"aria-label":"breadcrumb",children:(0,s.jsxs)("ol",{className:"breadcrumb",children:[(0,s.jsx)("li",{className:"breadcrumb-item",children:(0,s.jsx)(c(),{href:"/",children:"Home"})}),(0,s.jsx)("li",{className:"breadcrumb-item active",children:y})]})})})})}),(0,s.jsx)("div",{className:"col-12 mt-10",children:(0,s.jsxs)("div",{className:"row g-16 align-items-center justify-content-end",children:[(0,s.jsx)("div",{className:"col-12 col-md-6 col-xl-4",children:(0,s.jsx)("div",{className:"input-group align-items-center",children:(0,s.jsx)(b.Z,{value:null!=N?N:"",onChange:e=>j(String(e)),className:"form-control ps-8",placeholder:"Search all columns..."})})}),n.find(e=>"create"==e)?(0,s.jsx)("div",{className:"col hp-flex-none w-auto",children:(0,s.jsxs)(d.Button,{type:"button",className:"w-100 px-5",variant:"gradient",color:"orange","data-bs-toggle":"modal","data-bs-target":"#addNewUser",children:[(0,s.jsx)("i",{className:"ri-add-line remix-icon"})," Add Stock"]})}):null,(0,s.jsx)("div",{className:"modal fade -mt-2",id:"addNewUser",tabIndex:-1,"aria-labelledby":"addNewUserLabel","aria-hidden":"true","data-bs-keyboard":"false","data-bs-backdrop":"static",children:(0,s.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header py-16 px-24",children:[(0,s.jsx)("h5",{className:"modal-title font-bold",id:"addNewUserLabel",children:"Add Stock"}),(0,s.jsx)("button",{type:"button",className:"btn-close hp-bg-none d-flex align-items-center justify-content-center","data-bs-dismiss":"modal","aria-label":"Close",children:(0,s.jsx)("i",{className:"ri-close-line hp-text-color-dark-0 lh-1",style:{fontSize:"24px"}})})]}),(0,s.jsx)("div",{className:"divider m-0"}),(0,s.jsxs)("form",{onSubmit:submitAdd,id:"formCreate",children:[(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsx)(u.Z,{name:"file",id:"file"}),(0,s.jsxs)("div",{className:"row gx-8",children:[(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)("div",{className:"mb-24",children:(0,s.jsx)(d.Input,{type:"text",required:!0,variant:"standard",className:"border-b-1",name:"name",label:"Name Stock",id:"name"})})}),(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)("div",{className:"mb-24",children:(0,s.jsx)(d.Input,{type:"number",step:"any",required:!0,variant:"standard",className:"border-b-1",name:"stock",label:"Stock",id:"stock"})})}),(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)("div",{className:"mb-24",children:(0,s.jsx)(d.Input,{type:"text",onChange:byNumeral,required:!0,variant:"standard",className:"border-b-1",name:"price_buy",label:"Purchase Price",id:"price_buy"})})}),(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)("div",{className:"mb-24",children:(0,s.jsx)(d.Input,{type:"text",onChange:byNumeral,required:!0,variant:"standard",className:"border-b-1",name:"price_sell",label:"Selling Price",id:"price_sell"})})})]})]}),(0,s.jsxs)("div",{className:"modal-footer pt-0 px-24 pb-24",children:[(0,s.jsx)("div",{className:"divider"}),(0,s.jsx)(d.Button,{type:"submit",className:"w-full",color:"blue",children:"Submit"})]})]})]})})})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card hp-contact-card mb-32 -mt-3 shadow-md",children:(0,s.jsx)("div",{className:"card-body px-0",children:(0,s.jsx)(v.Z,{search:N,action:{delete:n.find(e=>"delete"==e)?f:null,edit:n.find(e=>"edit"==e)?f:null},urlFatch:f,reload:x,modalData:[{name:"img",type:"img",id:"img",full:!0},{name:"name",type:"text",label:"Name Stock",id:"name",required:!0},{name:"stock",type:"number",id:"stock",required:!0},{name:"priceBuy",type:"number",id:"price_buy",required:!0,numeral:!0,label:"Purchase Price"},{name:"priceSell",type:"number",label:"Selling Price",id:"price_sell",required:!0,numeral:!0}]})})})})]})})}}},function(e){e.O(0,[224,35,774,888,179],function(){return e(e.s=9410)}),_N_E=e.O()}]);